import{k as t,l as e,m as o,q as r,i as s,n as i,u as n}from"./pfe-icon.js";function c(t,e,o,r){var s,i=arguments.length,n=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,o,r);else for(var c=t.length-1;c>=0;c--)(s=t[c])&&(n=(i<3?s(n):i>3?s(e,o,n):s(e,o))||n);return i>3&&n&&Object.defineProperty(e,o,n),n}function a(t,e,o,r){if("a"===o&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===o?r:"a"===o?r.call(t):r?r.value:e.get(t)}function l(t,e,o,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(t,o):s?s.value=o:e.set(t,o),o
/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */}const h=t(class extends e{constructor(t){var e;if(super(t),t.type!==o.ATTRIBUTE||"class"!==t.name||(null===(e=t.strings)||void 0===e?void 0:e.length)>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(t){return" "+Object.keys(t).filter((e=>t[e])).join(" ")+" "}update(t,[e]){var o,s;if(void 0===this.nt){this.nt=new Set,void 0!==t.strings&&(this.st=new Set(t.strings.join(" ").split(/\s/).filter((t=>""!==t))));for(const t in e)e[t]&&!(null===(o=this.st)||void 0===o?void 0:o.has(t))&&this.nt.add(t);return this.render(e)}const i=t.element.classList;this.nt.forEach((t=>{t in e||(i.remove(t),this.nt.delete(t))}));for(const t in e){const o=!!e[t];o===this.nt.has(t)||(null===(s=this.st)||void 0===s?void 0:s.has(t))||(o?(i.add(t),this.nt.add(t)):(i.remove(t),this.nt.delete(t)))}return r}});class d extends Event{constructor(t,e,o){super("context-request",{bubbles:!0,composed:!0}),this.context=t,this.callback=e,this.multiple=o}}const u=s`:host(:is([on=dark])){--context:dark}:host(:is([on=light])){--context:light}:host(:is([on=saturated])){--context:saturated}:host(:is([color-palette=darker],[color-palette=darkest])){--context:dark;--rh-context-text:var(--rh-context-dark-color-text, #fff);--rh-context-text-muted:var(--rh-context-dark-color-text-muted, #d2d2d2);--rh-context-link:var(--rh-context-dark-color-text-link, #73bcf7);--rh-context-link-hover:var(--rh-context-dark-color-text-link-hover, #bee1f4);--rh-context-link-focus:var(--rh-context-dark-color-text-link-focus, #bee1f4);--rh-context-link-visited:var(--rh-context-dark-color-text-link-visited, #a18fff);--rh-context-link-visited-hover:var(--rh-context-dark-color-text-link-visited-hover, #cbc1ff)}:host(:is([color-palette=lighter],[color-palette=lightest],[color-palette=base])){--context:light;--rh-context-text:var(--rh-context-light-color-text, #151515);--rh-context-text-muted:var(--rh-context-light-color-text-muted, #6a6e73);--rh-context-link:var(--rh-context-light-color-text-link, #06c);--rh-context-link-hover:var(--rh-context-light-color-text-link-hover, #004080);--rh-context-link-focus:var(--rh-context-light-color-text-link-focus, #004080);--rh-context-link-visited:var(--rh-context-light-color-text-link-visited, #6753ac);--rh-context-link-visited-hover:var(--rh-context-light-color-text-link-visited-hover, #1f0066)}:host(:is([color-palette=lightest])){--rh-context-background-color:var(--rh-color-surface-lighest, #fff)}:host(:is([color-palette=lighter])){--rh-context-background-color:var(--rh-color-surface-lighter, #f5f5f5)}:host(:is([color-palette=base])){--rh-context-background-color:var(--rh-color-surface-lighest, #fff)}:host(:is([color-palette=darker])){--rh-context-background-color:var(--rh-color-surface-darker, #212427)}:host(:is([color-palette=darkest])){--rh-context-background-color:var(--rh-color-surface-darkest, #151515)}`;var x,f;const v=new Map;class p{constructor(t,e){var o;this.host=t,this.prefix="rh-",this.last=null,this.prefix=e?.prefix??"rh-",this.context={name:`${this.prefix}-color-context`,initialValue:o},this.logger=new i(t),this.styleController=new n(t,u),t.addController(this)}}class b extends p{constructor(t,e){super(t,e),x.add(this),this.callbacks=new Set,this.mo=new MutationObserver((()=>this.update(this.contextVariable))),this.style=window.getComputedStyle(t),this.attribute=e?.attribute??"color-palette"}get contextVariable(){return this.style.getPropertyValue("--context").trim()||null}hostConnected(){this.host.addEventListener("context-request",(t=>a(this,x,"m",f).call(this,t))),this.mo.observe(this.host,{attributes:!0,attributeFilter:[this.attribute,"on"]}),this.update(this.contextVariable);for(const[t,e]of v)t.dispatchEvent(e)}hostDisconnected(){this.callbacks.forEach((t=>this.callbacks.delete(t))),this.mo.disconnect()}isColorContextEvent(t){return t.target!==this.host&&t.context.name===`${this.prefix}-color-context`}update(t){for(const e of this.callbacks)e(t)}}x=new WeakSet,f=function(t){this.isColorContextEvent(t)&&(t.stopPropagation(),t.callback(this.contextVariable),t.multiple&&this.callbacks.add(t.callback))};class k extends p{constructor(t,e){super(t,e),this.override=null,this.attribute??(this.attribute="on")}hostConnected(){const t=new d(this.context,(t=>this.contextCallback(t)),!0);this.override=this.host.getAttribute(this.attribute),this.host.dispatchEvent(t),v.set(this.host,t)}hostDisconnected(){this.dispose?.(),this.dispose=void 0,v.delete(this.host)}contextCallback(t,e){e&&e!==this.dispose&&(this.dispose?.(),this.dispose=e),this.update(t)}update(t){this.override||t===this.last||(this.last=t,this.logger.log(`setting context from ${this.host.getAttribute(this.attribute)} to ${t}`),null==t?this.host.removeAttribute(this.attribute):this.host.setAttribute(this.attribute,t))}}function g(t){return function(e,o){e.constructor.addInitializer((e=>{e.__colorContextProvider=new b(e,t)}))}}function m(t){return function(e,o){e.constructor.addInitializer((e=>{e.__colorContextConsumer=new k(e,t)}))}}export{c as _,a,m as b,g as c,l as d,h as o};
